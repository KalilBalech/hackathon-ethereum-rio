<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style-2.css">
    <title>Mint your NFT</title>
</head>
<body>
    <section class="first-page">
        <header>
            <a class="logo" href="index.html">
                <img src="images/Logo_Favel.png" alt="Logo">
            </a>
            <button id='loginButton' onclick="" >Conecte sua carteira</button>
            <p id='userWallet' ></p>
        </header>
        <section class="first">
            <h1 class="main-title"> Create Your <span>NFT</span> And Show <br> The World The <span> Brazilian Art</span></h1>
            <h2 class="main-subtitle">Sell Your Art And <span> Increase Your Impact</span></h2>
            
            <form class="form">
                <div class="upload-file">
                    <label for="upload-file">Upload File</label>
                    <input type="file" id="upload-file">
                </div>
                <div class="name-input">
                    <label for="name">NFT name</label>
                    <input type="text" id="name">
                </div>
                <div class="description-input">
                    <label for="description">NFT description</label>
                    <input type="text" id="description">
                </div>
                <div class="wallet-address-input">
                    <label for="address">Wallet Address</label>
                    <input type="text" id="address">
                </div>
                <div>
                    <button id="mint-button" type="submit" onclick="mintNFT()">Mint NFT</button>
                </div>
            </form>
        </section>
    </section>
    <footer>
        <div class="left">
            <img src="images/Logo_Favel_branco.png" alt="Logo">
            <h3 class="email">contato@favelart.com</h3>
        </div>
        <div class="right">
            <h3 class="copyright">Copyright Â© 2022 favelART, Inc.</h3>
        </div>
    </footer>
    <script>
        window.userWalletAddress = null
    const loginButton = document.getElementById('loginButton')
    const userWallet = document.getElementById('userWallet')

    function toggleButton() {
      if (!window.ethereum) {
        loginButton.innerText = 'MetaMask is not installed'
        
        
        return false
      }

      loginButton.addEventListener('click', loginWithMetaMask)
    }

    async function loginWithMetaMask() {
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })
        .catch((e) => {
          console.error(e.message)
          return
        })
      if (!accounts) { return }

      window.userWalletAddress = accounts[0]
      userWallet.innerText = window.userWalletAddress
      loginButton.innerText = 'Desconecte sua carteira'

      loginButton.removeEventListener('click', loginWithMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', signOutOfMetaMask)
      }, 200)
    }

    function signOutOfMetaMask() {
      window.userWalletAddress = null
      userWallet.innerText = ''
      loginButton.innerText = 'Conecte sua carteira'

      loginButton.removeEventListener('click', signOutOfMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', loginWithMetaMask)
      }, 200)
    }

    window.addEventListener('DOMContentLoaded', () => {
      toggleButton()
    });
    </script>
</body>
</html>
